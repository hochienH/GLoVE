python src/preprocess.py --input Dataset/data/ml_dataset_alpha101_volatility.csv --output Dataset/clean.pkl --disabled_features close log_return u_hat_90 --garch_scaling per_series --use_log_target --target_col var_true_90 --garch_col garch_var_90
python src/dataset_builder.py --input Dataset/clean.pkl --output Dataset/ts_data.pkl --val_frac 0.2 --test_frac 0.1 --input_chunk_length 90 --static_mode industry_ticker --target_col var_true_90 --garch_col garch_var_90
python src/model_train.py --data Dataset/ts_data.pkl --epochs 2 --batch_size 32 --lambda 0.6 --model_path models/tsmixer_v1.pth --log_dir logs
python src/model_predict_eval.py --data Dataset/ts_data.pkl --model models/tsmixer_v1.pth --output outputs/metrics_v1.csv --use_log_target


python src/preprocess.py --input Dataset/data/ml_dataset_alpha101_volatility.csv --output Dataset/clean.pkl --disabled_features close log_return u_hat_90 --use_log_target --target_col var_true_90 --garch_col garch_var_90
python src/dataset_builder.py --input Dataset/clean.pkl --output Dataset/ts_data.pkl --val_frac 0.2 --test_frac 0.1 --input_chunk_length 90 --static_mode ticker --target_col var_true_90 --garch_col garch_var_90
python src/model_train.py --data Dataset/ts_data.pkl --epochs 10 --batch_size 32 --lambda 0.1 --model_path models/tsmixer_v1.pth --log_dir logs
python src/model_predict_eval.py --data Dataset/ts_data.pkl --model models/tsmixer_v1.pth --output outputs/metrics_v1.csv

python src/preprocess.py `
    --input Dataset/data/ml_dataset_alpha101_volatility.csv `
    --output Dataset/clean.pkl `
    --disabled_features close log_return u_hat_90 `
    --use_log_target `
    --target_col var_true_90 `
    --garch_col garch_var_90 `

python src/dataset_builder.py `
    --input Dataset/clean.pkl `
    --output Dataset/ts_data.pkl `
    --val_frac 0.3 `
    --test_frac 0.3 `
    --input_chunk_length 90 `
    --static_mode ticker `
    --target_col var_true_90 `
    --garch_col garch_var_90 `

# 訓練模型，自訂部分超參數
python src/model_train.py `
    --data Dataset/ts_data.pkl `
    --lambda 1 `
    --epochs 100 `
    --lr 3e-4 `
    --lr_scheduler exponential `
    --lr_gamma 0.99 `
    --grad_clip 0.5 `
    --hidden_size 32 `
    --ff_size 64 `
    --num_blocks 4 `
    --dropout 0.1 `
    --model_path models/tsmixer.pth

python src/model_train_tsmixer_optuna.py `
   --data Dataset/ts_data.pkl `
   --trials 100 `
   --epochs 10 `
   --batch_size 32 `
   --lambda_weight 1 `
   --lr_min 1e-4 `
   --lr_max 1e-2 `
   --hidden_size 32 `
   --ff_size 64 `
   --num_blocks 4 `
   --dropout 0.1 `
   --log_dir logs `
   --output_model models/tsmixer_optuna.pth `
   --seed 42

# 評估模型
python src/model_predict_eval.py `
    --data Dataset/ts_data.pkl `
    --model models/tsmixer_optuna.pth `
    --output outputs/tsmixer_optuna_metrics.csv

python src/model_train_tsmixer_optuna_DeepEnsemble.py `
  --data Dataset/ts_data.pkl `
  --trials 100 `
  --epochs 10 `
  --batch_size 32 `
  --lambda_weight 1 `
  --lr_min 1e-4 `
  --lr_max 1e-2 `
  --num_blocks 4 `
  --log_dir logs `
  --output_model models/tsmixer_optuna.pth `
  --ensemble_runs 10 `
  --seed 42

python src/model_predict_eval_ensemble.py `
    --data Dataset/ts_data.pkl `
    --model_base models/tsmixer_optuna.pth `
    --output outputs/metrics_ensemble.csv

python src/model_train_tsmixer_optuna_ParamsEnsemble.py `
  --data Dataset/ts_data.pkl `
  --trials 10 `
  --ensemble_runs 10 `
  --epochs 5 `
  --batch_size 32 `
  --lambda_weight 1 `
  --lr_min 1e-4 `
  --lr_max 1e-2 `
  --num_blocks 4 `
  --log_dir logs `
  --output_model models/tsmixer_optuna.pth `
  --trial_csv outputs/optuna_lr_trials.csv `
  --seed 42




# TFT
python src/model_train_TFT.py 
    --data Dataset/ts_data.pkl 
    --epochs 2
    --batch_size 32 
    --lambda 1
    --model_path models/tft.pth 
    --log_dir logs

python src/model_predict_eval_TFT.py `
    --data Dataset/ts_data.pkl `
    --model models/tft.pth `
    --output outputs/tft_metrics.csv
